{% extends 'estate/base.html' %}
{% load static%}
{% block extra_css %}
  <link rel="stylesheet" href="{% static 'estate/css/buy.css' %}">
{% endblock %}
{% block content %}

<div class="page-header">
  <div class="container">
    <h1>Properties for Sale</h1>
    <p>Discover your dream property from our curated collection</p>
  </div>
</div>

<div class="container mb-5">
  <div class="row g-4">
    {% if buy %}
      {% for bought in buy %}
        {% if bought.available %}
          <div class="col-md-6 col-lg-4">
            <div class="card property-card h-100">
              <div class="property-image">
                <div class="property-status">For Sale</div>
                <a href="{% url 'toggle-wishlist-buy' bought.id %}" class="wishlist-btn">
                  {% if bought.whilist %}
                    <i class="fas fa-bookmark"></i>
                  {% else %}
                    <i class="far fa-bookmark"></i>
                  {% endif %}
                </a>
              </div>
              
              <div class="card-body d-flex flex-column">
                <h5 class="property-title">{{ bought.summary }}</h5>
                
                <div class="property-location">
                  <i class="fas fa-map-marker-alt"></i>
                  <span>{{ bought.location }}, {{ bought.state }}</span>
                </div>
                
                <div class="property-price">â‚¦{{ bought.price }}</div>
                
                <p class="property-description">{{ bought.property_description }}</p>
                
                <div class="property-details">
                  <div class="detail-item">
                    <span class="detail-label">Phone</span>
                    <span class="detail-value">{{ bought.phone_number }}</span>
                  </div>
                  <div class="detail-item">
                    <span class="detail-label">Negotiable</span>
                    <span class="detail-value">
                      {% if bought.negotiate %}
                        <span class="negotiable-badge">Yes</span>
                      {% else %}
                        <span class="negotiable-badge not-negotiable">No</span>
                      {% endif %}
                    </span>
                  </div>
                </div>
                
                <div class="date-listed mb-3">
                  <i class="far fa-calendar-alt"></i> Listed {{ bought.listed_date|date:"M d, Y" }}
                </div>
                
                <div class="mt-auto">
                  <a href="{% url 'view-property-s' property_id=bought.id %}" class="btn btn-view-property">
                    View Details
                  </a>
                </div>
              </div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    {% else %}
      <div class="col-12">
        <div class="no-properties">
          <i class="fas fa-home"></i>
          <h3>No Properties Available</h3>
          <p>Check back soon for new listings or contact us to list your property.</p>
        </div>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}